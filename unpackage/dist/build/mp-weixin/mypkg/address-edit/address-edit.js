(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["mypkg/address-edit/address-edit"],{"2f82":function(e,t,r){"use strict";(function(e){r("b43d");n(r("66fd"));var t=n(r("7f4b"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("543d")["createPage"])},"3afa":function(e,t,r){"use strict";var n=r("40ea"),a=r.n(n);a.a},"40ea":function(e,t,r){},"7f4b":function(e,t,r){"use strict";r.r(t);var n=r("8fe3"),a=r("fd72");for(var s in a)"default"!==s&&function(e){r.d(t,e,(function(){return a[e]}))}(s);r("3afa");var u,d=r("f0c5"),i=Object(d["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],u);t["default"]=i.exports},"8fe3":function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return n}));var n={uniForms:function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(r.bind(null,"8862"))},uniFormsItem:function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item")]).then(r.bind(null,"70d5"))},uniEasyinput:function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput")]).then(r.bind(null,"2c66"))},uniDataPicker:function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uni-data-picker/components/uni-data-picker/uni-data-picker")]).then(r.bind(null,"fa86"))}},a=function(){var e=this,t=e.$createElement;e._self._c},s=[]},bbcf:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r("a34a")),a=r("2f62");function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r,n,a,s,u){try{var d=e[s](u),i=d.value}catch(o){return void r(o)}d.done?t(i):Promise.resolve(i).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function d(e){u(s,n,a,d,i,"next",e)}function i(e){u(s,n,a,d,i,"throw",e)}d(void 0)}))}}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={data:function(){return{pageTitle:"修改地址",user_address:{},is_checked:!0}},computed:o({},(0,a.mapState)("address",["areas","address_list","default_address_id"])),onLoad:function(t){switch(t.type){case"edit":this.pageTitle="修改地址";break;case"add":this.pageTitle="添加地址";break}e.setNavigationBarTitle({title:this.pageTitle}),this.user_address=JSON.parse(e.getStorageSync("user_address")||"{}")},methods:o(o({},(0,a.mapMutations)("address",["addAddress","updateAddress","editAddress","updateDefaultAddress"])),{},{submitForm:function(){var t=this;return d(n.default.mark((function r(){var a,s,u,d,i,c,l,f,m;return n.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=o({},t.user_address),a.receiver&&a.mobile&&(a.area||a.address)&&a.detail_address){r.next=3;break}return r.abrupt("return",e.$showMsg("地址信息填写不完整"));case 3:if(1==a.mobile[0]&&11===a.mobile.length){r.next=5;break}return r.abrupt("return",e.$showMsg("手机号格式不正确"));case 5:if("修改地址"!==t.pageTitle){r.next=23;break}return console.log(a),s={receiver:a.receiver,mobile:a.mobile,address:[a.address[0].value,a.address[1].value,a.address[2].value],detail_address:a.detail_address},console.log(s),r.next=11,e.$http.put("address/".concat(a.address_id,"/"),{address_list:s});case 11:if(u=r.sent,d=u.data,200===d.code){r.next=15;break}return r.abrupt("return",e.$showMsg(d.msg));case 15:e.$showMsg(d.msg),i=o({},s),i.address_id=a.address_id,i.address=a.address,t.editAddress(i),setTimeout((function(){e.navigateBack(-1)}),1500),r.next=35;break;case 23:return c={phone_id:JSON.parse(e.getStorageSync("userInfo")).mobile,receiver:a.receiver,mobile:a.mobile,address:[a.area[0].value,a.area[1].value,a.area[2].value],detail_address:a.detail_address},r.next=26,e.$http.post("address_create/",{address_list:c});case 26:if(l=r.sent,f=l.data,200===f.code){r.next=30;break}return r.abrupt("return",e.$showMsg(f.msg));case 30:e.$showMsg(f.msg),m=o({},c),m.address=a.area,t.addAddress(m),setTimeout((function(){e.navigateBack(-1)}),1500);case 35:case"end":return r.stop()}}),r)})))()},deaultChange:function(){var t=this;return d(n.default.mark((function r(){var a,s,u;return n.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!t.user_address.is_default){r.next=2;break}return r.abrupt("return",e.$showMsg("默认地址不能为空"));case 2:return t.user_address.is_default=!t.user_address.is_default,a=t.user_address.address_id,r.next=6,e.$http.get("address_default/".concat(a,"/"));case 6:if(s=r.sent,u=s.data,200===u.code){r.next=10;break}return r.abrupt("return",e.$showMsg(u.msg));case 10:e.$showMsg(u.msg),t.updateDefaultAddress(a),setTimeout((function(){e.navigateBack(-1)}),1500);case 13:case"end":return r.stop()}}),r)})))()},areaChange:function(e){console.log(e.detail.value),this.user_address.area=e.detail.value,this.user_address.address=e.detail.value}})};t.default=l}).call(this,r("543d")["default"])},fd72:function(e,t,r){"use strict";r.r(t);var n=r("bbcf"),a=r.n(n);for(var s in n)"default"!==s&&function(e){r.d(t,e,(function(){return n[e]}))}(s);t["default"]=a.a}},[["2f82","common/runtime","common/vendor"]]]);