(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["mypkg/address/address"],{1129:function(e,t,n){"use strict";var r=n("1fa2"),s=n.n(r);s.a},"1fa2":function(e,t,n){},2460:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("a34a")),s=n("2f62");function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r,s,i,a){try{var u=e[i](a),d=u.value}catch(o){return void n(o)}u.done?t(d):Promise.resolve(d).then(r,s)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function u(e){a(i,r,s,u,d,"next",e)}function d(e){a(i,r,s,u,d,"throw",e)}u(void 0)}))}}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f={data:function(){return{type:0,from:null}},onLoad:function(e){this.from=e.from,this.type=e.type,this.getAddressList()},computed:o({},(0,s.mapState)("address",["address_list","default_address_id"])),methods:o(o({},(0,s.mapMutations)("address",["delAddress","updateAddress","updateDefaultAddress"])),{},{editAddress:function(t){t.address_id==this.default_address_id?t.is_default=!0:t.is_default=!1,e.setStorageSync("user_address",JSON.stringify(t)),e.navigateTo({url:"/mypkg/address-edit/address-edit?type=edit"})},getAddressList:function(){var t=this;return u(r.default.mark((function n(){var s,i,a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=JSON.parse(e.getStorageSync("userInfo")).mobile,n.next=3,e.$http.get("address_info/"+s+"/");case 3:if(i=n.sent,a=i.data,200===a.code){n.next=7;break}return n.abrupt("return",e.$showMsg(a.msg));case 7:a.data.forEach((function(e){e.address=[],e.address.push({text:e.province,value:e.province_id.toString()}),e.address.push({text:e.city,value:e.city_id.toString()}),e.address.push({text:e.district,value:e.district_id.toString()})})),t.updateAddress(a.data),t.updateDefaultAddress(a.default_address);case 10:case"end":return n.stop()}}),n)})))()},addAddress:function(){e.removeStorageSync("user_address"),e.navigateTo({url:"/mypkg/address-edit/address-edit?type=add"})},deleteAddressHandler:function(t){var n=this;return u(r.default.mark((function s(){var i,a;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t!=n.default_address_id){r.next=2;break}return r.abrupt("return",e.$showMsg("默认地址不允许删除"));case 2:return r.next=4,e.$http.delete("address/".concat(t,"/"));case 4:if(i=r.sent,a=i.data,200===a.code){r.next=8;break}return r.abrupt("return",e.$showMsg(a.msg));case 8:e.$showMsg(a.msg),n.delAddress(t);case 10:case"end":return r.stop()}}),s)})))()},addressCheckedHandler:function(t){console.log(this.from),console.log(t),"settle"===this.from&&(e.setStorageSync("user_checked_address",JSON.stringify(t)),e.navigateBack(-1))}})};t.default=f}).call(this,n("543d")["default"])},2810:function(e,t,n){"use strict";n.r(t);var r=n("9779"),s=n("d139");for(var i in s)"default"!==i&&function(e){n.d(t,e,(function(){return s[e]}))}(i);n("1129");var a,u=n("f0c5"),d=Object(u["a"])(s["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],a);t["default"]=d.exports},9779:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r}));var r={uniNoticeBar:function(){return n.e("uni_modules/uni-notice-bar/components/uni-notice-bar/uni-notice-bar").then(n.bind(null,"9c5a"))},uniSwipeAction:function(){return n.e("uni_modules/uni-swipe-action/components/uni-swipe-action/uni-swipe-action").then(n.bind(null,"16d7"))},uniSwipeActionItem:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-swipe-action/components/uni-swipe-action-item/uni-swipe-action-item")]).then(n.bind(null,"2e80"))},addressItem:function(){return n.e("components/address-item/address-item").then(n.bind(null,"3032"))},uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"39de"))}},s=function(){var e=this,t=e.$createElement;e._self._c},i=[]},acb9:function(e,t,n){"use strict";(function(e){n("b43d");r(n("66fd"));var t=r(n("2810"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},d139:function(e,t,n){"use strict";n.r(t);var r=n("2460"),s=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=s.a}},[["acb9","common/runtime","common/vendor"]]]);