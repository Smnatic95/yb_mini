(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subpkg/goods_detail/goods_detail"],{"075a":function(t,e,o){"use strict";o.d(e,"b",(function(){return s})),o.d(e,"c",(function(){return i})),o.d(e,"a",(function(){return n}));var n={uniIcons:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(o.bind(null,"39de"))},uniBadge:function(){return o.e("uni_modules/uni-badge/components/uni-badge/uni-badge").then(o.bind(null,"7268"))},uniPopup:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-popup/components/uni-popup/uni-popup")]).then(o.bind(null,"5055"))},goodsItem:function(){return o.e("components/goods-item/goods-item").then(o.bind(null,"a2c6"))}},s=function(){var t=this,e=t.$createElement;t._self._c},i=[]},"1e28":function(t,e,o){"use strict";o.r(e);var n=o("075a"),s=o("3329");for(var i in s)"default"!==i&&function(t){o.d(e,t,(function(){return s[t]}))}(i);o("f888");var r,c=o("f0c5"),a=Object(c["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],r);e["default"]=a.exports},3329:function(t,e,o){"use strict";o.r(e);var n=o("848c"),s=o.n(n);for(var i in n)"default"!==i&&function(t){o.d(e,t,(function(){return n[t]}))}(i);e["default"]=s.a},7440:function(t,e,o){},"848c":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,s=a(o("a34a")),i=o("2f62"),r=a(o("f9a6")),c=a(o("c11c"));function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e,o,n,s,i,r){try{var c=t[i](r),a=c.value}catch(u){return void o(u)}c.done?e(a):Promise.resolve(a).then(n,s)}function d(t){return function(){var e=this,o=arguments;return new Promise((function(n,s){var i=t.apply(e,o);function r(t){u(i,n,s,r,c,"next",t)}function c(t){u(i,n,s,r,c,"throw",t)}r(void 0)}))}}function l(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function g(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?l(Object(o),!0).forEach((function(e){f(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function f(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var p=(0,i.createNamespacedHelpers)("user"),h=p.mapState,m=p.mapMutations,_=(0,i.createNamespacedHelpers)("cart"),b=_.mapState,v=_.mapMutations,k=(n={mixins:[r.default,c.default],data:function(){return{goods_id:"",goods_stock:"",goods_img:"",weight:"",goodsInfo:{},is_collect:!1,num:0,goods:{}}},computed:g(g({},h(["token"])),(0,i.mapGetters)("cart",["total"])),watch:{total:{handler:function(t){this.num=t}}},onShow:function(){},onLoad:function(t){this.num=this.total,this.goods_id=t.id,this.weight=t.weight,this.goods_stock=t.goods_stock,this.goods_img=t.goods_img,this.getGoodsDetail(),this.collectCheck()}},f(n,"computed",g({},b(["cart_list"]))),f(n,"methods",g(g(g({},v(["addToCart","updateGoodsCount","undateGoodsState","updateAllChecked"])),m(["undateToken","updateUserInfo"])),{},{handleContact:function(t){console.log(t)},showPopup:function(){this.checkStock()&&(this.goods.goods_count=1,this.$refs.popup.open())},onSettle:function(){this.checkStock()&&(this.addToCart(this.goods),this.updateGoodsCount(this.goods),this.updateAllChecked(!1),this.goods.is_checked=!0,this.undateGoodsState(this.goods),this.$refs.popup.close(),t.navigateTo({url:"/pages/settle/settle?goods=".concat(JSON.stringify(this.goods))}))},addToCartHandler_b:function(){this.checkStock()&&(this.goods.goods_count=1,this.$refs.popup_addCar.open())},addToCartHandler:function(){if(this.checkStock()){var e={goods_id:this.goods_id,goods_name:this.goodsInfo.name,goods_intro:this.goodsInfo.introduction,goods_img:t.$baseUrl1+this.goods_img,price:this.goodsInfo.price,market_price:this.goodsInfo.market_price,goods_count:this.goods.goods_count,weight:this.weight,is_checked:!0};this.addToCart(e),t.$showMsg("添加成功~"),this.$refs.popup_addCar.close()}},checkStock:function(){return 0==this.goods_stock?(t.$showMsg("宝贝售空了,隔段时间再来看看吧"),!1):1},collectChanged:function(){var e=this;return d(s.default.mark((function o(){var n,i,r,c,a;return s.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(n=JSON.parse(t.getStorageSync("userInfo")).mobile,i={phone_id:n,sku_id:e.goods_id},e.is_collect){o.next=9;break}return o.next=5,t.$http.put("user_collect/",{collect_list:i});case 5:r=o.sent,c=r.data,o.next=13;break;case 9:return o.next=11,t.$http.delete("user_collect/",{collect_list:i});case 11:a=o.sent,c=a.data;case 13:if(200===c.code){o.next=15;break}return o.abrupt("return",t.$showMsg(c.msg));case 15:t.$showMsg(c.msg),e.is_collect=!e.is_collect;case 17:case"end":return o.stop()}}),o)})))()},collectCheck:function(){var e=this;return d(s.default.mark((function o(){var n,i,r;return s.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(e.token){o.next=2;break}return o.abrupt("return");case 2:return n=JSON.parse(t.getStorageSync("userInfo")).mobile,o.next=5,t.$http.get("user_collect_true/".concat(n,"/").concat(e.goods_id,"/"));case 5:if(i=o.sent,r=i.data,200===r.code){o.next=9;break}return o.abrupt("return",t.$showMsg(r.msg));case 9:e.is_collect=r.flag;case 10:case"end":return o.stop()}}),o)})))()},getGoodsDetail:function(){var e=this;return d(s.default.mark((function o(){var n,i;return s.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.$http.get("sku_detail/".concat(e.goods_id,"/"));case 2:if(n=o.sent,i=n.data,200===i.code){o.next=6;break}return o.abrupt("return",t.$showMsg(i.msg));case 6:i.lists[0].de_image=i.lists[0].de_image.filter((function(t){return t})),console.log(i.lists[0].de_image),i.lists[0].de_image=i.lists[0].de_image.map((function(e){return t.$baseUrl1+e})),i.lists[0].image=i.lists[0].image.map((function(e){return t.$baseUrl1+e})),e.goodsInfo=i.lists[0],e.goods={goods_id:e.goods_id,goods_name:e.goodsInfo.name,goods_intro:e.goodsInfo.introduction,goods_img:t.$baseUrl1+e.goods_img,price:e.goodsInfo.price,market_price:e.goodsInfo.market_price,goods_count:1,weight:e.weight,is_checked:!0},t.setNavigationBarTitle({title:e.goodsInfo.name,complete:function(t){console.log(t)}});case 13:case"end":return o.stop()}}),o)})))()},numberChangeHandler:function(t){this.goods.goods_count=t.goods_count},gotoCart:function(){t.switchTab({url:"/pages/cart/cart"})},showServePopup:function(t){1===t?this.$refs.popup1.open("top"):this.$refs.popup2.open("top")},gotoComments:function(){var e=2;t.navigateTo({url:"/subpkg/comments_list/comments_list?id="+e})},previewDetailImg:function(e){var o=this.goodsInfo.de_image;t.previewImage({urls:o,current:o[e],fail:function(t){console.log(t)}})},previewSwiperImg:function(e){var o=this.goodsInfo.image;t.previewImage({urls:o,current:o[e],fail:function(t){console.log(t)}})}})),n);e.default=k}).call(this,o("543d")["default"])},"888c":function(t,e,o){"use strict";(function(t){o("b43d");n(o("66fd"));var e=n(o("1e28"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},f888:function(t,e,o){"use strict";var n=o("7440"),s=o.n(n);s.a}},[["888c","common/runtime","common/vendor"]]]);